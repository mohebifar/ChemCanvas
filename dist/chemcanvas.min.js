!function(a){"use strict";var b=function j(a,b,c){var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:j(e,b,c)}if("value"in d&&d.writable)return d.value;var f=d.get;return void 0===f?void 0:f.call(c)},c=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(a.__proto__=b)},d=function(a,b,c){b&&Object.defineProperties(a,b),c&&Object.defineProperties(a.prototype,c)},e=function(){function a(a){this.renderer=a,a.world=new LiThree.World,this.atoms=[],this._display=!1,this._displays=[],this._mode=!1,this._modes=[],this._attachInteractive()}return d(a,null,{attach:{value:function(a){var b;for(b in a.atoms){var c=a.atoms[b];this.addAtom(c)}},writable:!0,enumerable:!0,configurable:!0},addAtom:{value:function(a){this.atoms.push(a);var b;a.on("bond",function(){}),this._display.drawAtom(a);for(b in a.bonds){var c=a.bonds[b];this._display.drawBond(c)}},writable:!0,enumerable:!0,configurable:!0},setMode:{value:function(a){for(var b in this._modes){var c=this._modes[b];if(c instanceof a)return this._mode=c,void this._mode.up()}this._mode=new a(this),this._mode.create(),this._modes.push(this._mode)},writable:!0,enumerable:!0,configurable:!0},setDisplay:{value:function(a){for(var b in this._displays){var c=this._displays[b];if(c instanceof a)return this._display=c,void this._display.up()}this._display=new a(this),this._display.create(),this._displays.push(this._display)},writable:!0,enumerable:!0,configurable:!0},_attachInteractive:{value:function(){var a=this.renderer,b=new LiThree.Interactive(a);this.interactive=b},writable:!0,enumerable:!0,configurable:!0},show:{value:function(){this.renderer.draw();var a=this;requestAnimationFrame(function(){a.show()})},writable:!0,enumerable:!0,configurable:!0}}),a}(),f=function(){function a(a){this.canvas=a,this._atoms=[]}return d(a,null,{drawAll:{value:function(){},writable:!0,enumerable:!0,configurable:!0}}),a}(),g="ball-and-stick",h=function(a){function e(a){this.lights=[],b(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,a)}return c(e,a),d(e,null,{drawLight:{value:function(){var a=new LiThree.Light.Point;a.position.x=30,a.position.z=60,a.position.y=30;var b=new LiThree.Light.Point;b.position.x=-30,b.position.z=-60,b.position.y=-30,this.lights=[b,a]},writable:!0,enumerable:!0,configurable:!0},drawAtom:{value:function(a){var b=this.canvas.renderer,c=b.world,d=a.position,e=Math.exp(-Math.pow(a.element.atomicRadius-91,2)/500)*a.element.atomicRadius/100,f=LiThree.ObjectFactory.Sphere(e,50,50);f.position.copy(d),f.position.multiply(2),f.material.color.hex=a.element.color,c.add(f);var h={sphere:f,position:f.position,color:f.material.color,radius:e};a.setData(g,h)},writable:!0,enumerable:!0,configurable:!0},drawBond:{value:function(a){var b;a.hasData(g)?b=a.getData(g):(b={cylinders:[]},a.setData(g,b));var c=this.canvas.renderer,d=c.world,e=a.begin,f=a.end,h=e.getData(g),i=f.getData(g);if(h&&i){var j=h.position,k=i.position,l=h.color,m=i.color,n=j.distance(k),o=j.clone().add(k).divide(2),p=k.x-j.x,q=k.y-j.y,r=k.z-j.z,s=.1,t=new LiThree.Math.Quaternion;t.rotateZ(Math.atan2(q,p)),t.rotateY(-Math.asin(r/n));for(var u=(a.order-1)*s,v=0;v<a.order;v++){var w=LiThree.ObjectFactory.Cylinder(n,s,s);w.material.color=l,this._programCylinderShader(w,m),b.cylinders.push(w),d.add(w)}for(var x in b.cylinders){var w=b.cylinders[x];w.rotation=t,w.position.copy(o),w.position.y+=.2*x-u}}},writable:!0,enumerable:!0,configurable:!0},_programCylinderShader:{value:function(a,b){renderer.initShape(a),a.shader.fragmentProgram.clear(),a.shader.fragmentProgram.code("vec3 effectiveColor = halfColor > 0.5 ? vColor : %c2; gl_FragColor = vec4(%lw + effectiveColor, 1.0);",{c2:a.shader.fragmentProgram.uniform("vec3",function(){this.value(b.toArray())}),hc:a.shader.fragmentProgram.varying("float","halfColor"),lw:"lightWeight"}),a.shader.vertexProgram.code("%hc = %vp.x < 0.5 ? 1.0 : 0.0;",{lw:"lightWeight",vp:"vPosition",hc:a.shader.vertexProgram.varying("float","halfColor")}),a.shader.create()},writable:!0,enumerable:!0,configurable:!0},create:{value:function(){this.drawLight(),this.up()},writable:!0,enumerable:!0,configurable:!0},up:{value:function(){var a=renderer.world;for(var b in this.lights)a.add(this.lights[b])},writable:!0,enumerable:!0,configurable:!0},down:{value:function(){var a=renderer.world;for(var b in this.lights)a.remove(this.lights[b])},writable:!0,enumerable:!0,configurable:!0}}),e}(f),i=function(){function a(a){this.canvas=a}return d(a,null,{up:{value:function(){var a=this.canvas.interactive;a.on("drag",this._dragEvent),a.on("wheel",this._wheelEvent)},writable:!0,enumerable:!0,configurable:!0},down:{value:function(){var a=this.canvas.interactive;a.off("drag",this._dragEvent),a.off("wheel",this._wheelEvent)},writable:!0,enumerable:!0,configurable:!0},create:{value:function(){this._wheelEvent=function(a){camera.position.z+=a/100},this._dragEvent=function(a,b,c,d){if(0===d.button){var e=-b.x/500,f=-b.y/500,g=Math.sqrt(e*e+f*f),h=new LiThree.Math.Quaternion(1,0,0,0),i=camera.rotation,j=Math.sin(g*Math.PI)/g;h.x=Math.cos(g*Math.PI),h.y=0,h.z=j*e,h.w=-j*f,camera.rotation=new LiThree.Math.Quaternion(1,0,0,0),camera.rotation.multiply(h),camera.rotation.multiply(i),camera.getMatrix()}else 2===d.button&&(d.preventDefault(),camera.position.x+=-b.x/100,camera.position.y+=b.y/100)},this.up()},writable:!0,enumerable:!0,configurable:!0}}),a}();a.ChemCanvas={Canvas:e,Display:{BallAndStick:h},Mode:{Orbit:i}}}(this);
//# sourceMappingURL=chemcanvas.min.js.map