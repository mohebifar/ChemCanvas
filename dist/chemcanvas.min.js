!function(a){"use strict";var b=function i(a,b,c){var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:i(e,b,c)}if("value"in d&&d.writable)return d.value;var f=d.get;return void 0===f?void 0:f.call(c)},c=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(a.__proto__=b)},d=function(a,b,c){b&&Object.defineProperties(a,b),c&&Object.defineProperties(a.prototype,c)},e=function(){function a(a){this.renderer=a,a.world=new LiThree.World,this.atoms=[],this._display=!1,this._displays=[],this._attachInteractive()}return d(a,null,{addAtom:{value:function(a){this.atoms.push(a),this._display.drawAtom(a)},writable:!0,enumerable:!0,configurable:!0},setDisplay:{value:function(a){for(var b in this._displays){var c=this._displays[b];if(c instanceof a)return void(this._display=c)}this._display=new a(this),this._display.create(),this._displays.push(this._display)},writable:!0,enumerable:!0,configurable:!0},_attachInteractive:{value:function(){var a=this.renderer,b=new LiThree.Interactive(a);this.interactive=b},writable:!0,enumerable:!0,configurable:!0},show:{value:function(){this.renderer.draw();var a=this;requestAnimationFrame(function(){a.show()})},writable:!0,enumerable:!0,configurable:!0}}),a}(),f=function(){function a(a){this.canvas=a,this._atoms=[]}return d(a,null,{drawAll:{value:function(){},writable:!0,enumerable:!0,configurable:!0}}),a}(),g="ball-and-stick",h=function(a){function e(a){this.light=!1,b(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,a)}return c(e,a),d(e,null,{drawLight:{value:function(){var a=(renderer.world,new LiThree.Light.Point);a.position.x=-30,a.position.z=-60,a.position.y=-30,this.light=a},writable:!0,enumerable:!0,configurable:!0},drawAtom:{value:function(a){var b=this.canvas.renderer,c=b.world,d=a.position,e=Math.exp(-Math.pow(a.element.atomicRadius-91,2)/500)*a.element.atomicRadius,f=LiThree.ObjectFactory.Sphere(e/100,15,15);f.position.copy(d),f.position.multiply(2),f.material.color.hex=a.element.color,c.add(f);var h={sphere:f,position:f.position,color:f.material.color,radius:e};a.setData(g,h)},writable:!0,enumerable:!0,configurable:!0},drawBond:{value:function(a){var b;a.hasData(g)?b=a.getData(g):(b={},a.setData(g,b));var c=this.canvas.renderer,d=c.world,e=a.begin,f=a.end,h=e.getData(g).position,i=f.getData(g).position,j=e.getData(g).color,k=f.getData(g).color,l=(e.getData(g).radius,f.getData(g).radius,h.distance(i)),m=h.clone().add(i).divide(2),n=i.x-h.x,o=i.y-h.y,p=i.z-h.z,q=new LiThree.Math.Quaternion;q.rotateZ(Math.atan2(o,n)),q.rotateY(-Math.asin(p/l));for(var r=.2*(a.order-1)/2,s=1;s<=a.order;s++){var t=LiThree.ObjectFactory.Cylinder(l,.1,.1);t.rotation=q,t.material.color=j,t.position.copy(m),t.position.y+=.2*s+r,this._programCylinderShader(t,k),d.add(t)}},writable:!0,enumerable:!0,configurable:!0},_programCylinderShader:{value:function(a,b){renderer.initShape(a),a.shader.fragmentProgram.clear(),a.shader.fragmentProgram.code("vec3 effectiveColor = halfColor > 0.9 ? vColor : %c2; gl_FragColor = vec4(%lw + effectiveColor, 1.0);",{c2:a.shader.fragmentProgram.uniform("vec3",function(){this.value(b.toArray())}),hc:a.shader.fragmentProgram.varying("float","halfColor"),lw:"lightWeight"}),a.shader.vertexProgram.code("%hc = %vp.x < 0.5 ? 1.0 : 0.0;",{lw:"lightWeight",vp:"vPosition",hc:a.shader.vertexProgram.varying("float","halfColor")}),a.shader.create()},writable:!0,enumerable:!0,configurable:!0},create:{value:function(){this.drawLight(),this.up()},writable:!0,enumerable:!0,configurable:!0},up:{value:function(){var a=renderer.world;a.add(this.light)},writable:!0,enumerable:!0,configurable:!0},down:{value:function(){var a=renderer.world;a.remove(this.light)},writable:!0,enumerable:!0,configurable:!0}}),e}(f);a.ChemCanvas={Canvas:e,Display:{BallAndStick:h}}}(this);
//# sourceMappingURL=chemcanvas.min.js.map