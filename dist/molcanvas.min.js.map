{"version":3,"file":"molcanvas.min.js","sources":["molcanvas.js"],"names":["root","_get","get","object","property","receiver","desc","Object","getOwnPropertyDescriptor","undefined","parent","getPrototypeOf","writable","value","getter","call","_inherits","subClass","superClass","TypeError","prototype","create","constructor","enumerable","configurable","__proto__","_prototypeProperties","child","staticProps","instanceProps","defineProperties","Canvas","renderer","this","world","LiThree","World","atoms","_display","_displays","_mode","_modes","_data","orbitHelper","OrbitHelper","_attachInteractive","attach","molecule","i","atom","addAtom","push","on","drawAtom","bonds","bond","drawBond","setMode","mode","down","up","setDisplay","display","unsetData","key","setData","arguments","getData","hasData","show","draw","_this","TWEEN","update","requestAnimationFrame","interactive","Interactive","canvas","quaternion","Math","Quaternion","matrix","origin","Vector3","speed","camera","position","z","_getMatrix","rotate","dx","dy","r","sqrt","dq","cq","rs","sin","PI","x","cos","y","w","multiply","distance","delta","Tween","to","easing","Easing","Cubic","Out","start","Matrix4","fromRotationTranslationScaleOrigin","BaseDisplay","_atoms","drawAll","BAS_KEY","BallAndStick","lights","drawLight","light","Light","Point","specularColor","rgb","radius","exp","pow","element","atomicRadius","sphere","ObjectFactory","Sphere","copy","material","shininess","color","hex","add","initShape","_orbitShader","shader","elements","scale","set","Elastic","cylinders","begin","end","beginD","endD","beginP","endP","beginC","endC","middle","clone","divide","deltaX","deltaY","deltaZ","d","rotation","rotateZ","atan2","rotateY","asin","c","order","cylinder","Cylinder","_programCylinderShader","j","fragmentProgram","vertexProgram","clear","code","c2","uniform","toArray","hc","varying","lw","vp","p","vm","mm","om","initLighting","remove","EditorMode","_dragEvent","_clickEvent","_wheelEvent","off","point","unproject","pos","Chem","Atom","atomicNumber","ray","Ray","fromPoints","caster","RayCaster","resu","intersectTriangle","console","log","e","button","OrbitMode","preventDefault","MolCanvas","Display","Mode","Orbit","Editor"],"mappings":"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"}