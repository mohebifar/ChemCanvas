{"version":3,"sources":["../src/intro.js","../.tmp/es5/.tmp/es6/concat.js","../src/outro.js"],"names":[],"mappings":"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","file":"molcanvas.js","sourcesContent":["(function(root) {","export default\r\nclass Canvas {\r\n\r\n  constructor(renderer) {\r\n    this.renderer = renderer;\r\n    renderer.world = new LiThree.World();\r\n    this.atoms = [];\r\n    this.bonds = [];\r\n    this._display = false;\r\n    this._displays = [];\r\n\r\n    this._mode = false;\r\n    this._modes = [];\r\n\r\n    this._data = {};\r\n\r\n    this.orbitHelper = new OrbitHelper(this);\r\n\r\n    this._attachInteractive();\r\n  }\r\n\r\n  attach(molecule) {\r\n\r\n    var _this = this, i, j = 0, count = molecule.atoms.length;\r\n\r\n    for (i in molecule.atoms) {\r\n      let atom = molecule.atoms[i];\r\n\r\n      this.addAtom(atom, function () {\r\n\r\n        if (++j === count) {\r\n          for (var i in molecule.atoms) {\r\n            let atom = molecule.atoms[i];\r\n\r\n            for (var k in atom.bonds) {\r\n              _this.addBond(atom.bonds[k]);\r\n            }\r\n\r\n          }\r\n        }\r\n      }, false);\r\n    }\r\n\r\n  }\r\n\r\n  clear() {\r\n    var atoms = this.atoms.slice(0, this.atoms.length);\r\n\r\n    for (var i in atoms) {\r\n      this.removeAtom(atoms[i]);\r\n    }\r\n  }\r\n\r\n  addAtom(atom, callback = false, drawBonds = true) {\r\n    this.atoms.push(atom);\r\n    var i,\r\n      _this = this;\r\n\r\n    atom.on('bond', function () {\r\n      // TODO: draw cylinder dynamically\r\n    });\r\n\r\n    atom.on('delete', function () {\r\n      for (var i in _this._displays) {\r\n        let _display = _this._displays[i];\r\n        _display.removeAtom(atom);\r\n      }\r\n\r\n      _this.atoms.splice(_this.atoms.indexOf(atom), 1);\r\n    });\r\n\r\n    setTimeout(function () {\r\n      _this._display.drawAtom(atom, callback);\r\n    }, 0);\r\n\r\n    if (drawBonds) {\r\n      for (i in atom.bonds) {\r\n        _this.addBond(atom.bonds[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  removeAtom(atom) {\r\n    atom.emit('delete');\r\n  }\r\n\r\n  addBond(bond) {\r\n    var _this = this;\r\n\r\n    _this.bonds.push(bond);\r\n\r\n    bond.on('delete', function () {\r\n      for (var i in _this._displays) {\r\n        let _display = _this._displays[i];\r\n        _display.removeBond(bond);\r\n      }\r\n\r\n      _this.bonds.splice(_this.bonds.indexOf(bond), 1);\r\n    });\r\n\r\n\r\n    setTimeout(function () {\r\n      _this._display.drawBond(bond)\r\n    }, 0);\r\n  }\r\n\r\n  removeBond(bond) {\r\n    bond.emit('delete');\r\n  }\r\n\r\n  setMode(mode) {\r\n    if (this._mode) {\r\n      this._mode.down();\r\n    }\r\n\r\n    for (var i in this._modes) {\r\n      let _mode = this._modes[i];\r\n\r\n      if (_mode instanceof mode) {\r\n        this._mode = _mode;\r\n        this._mode.up();\r\n        return;\r\n      }\r\n    }\r\n\r\n    this._mode = new mode(this);\r\n    this._mode.create();\r\n    this._modes.push(this._mode);\r\n  }\r\n\r\n  setDisplay(display) {\r\n    if (this._display) {\r\n      this._display.down();\r\n    }\r\n\r\n    for (var i in this._displays) {\r\n      let _display = this._displays[i];\r\n\r\n      if (_display instanceof display) {\r\n        this._display = _display;\r\n        this._display.up();\r\n        return;\r\n      }\r\n    }\r\n\r\n    this._display = new display(this);\r\n    this._display.create();\r\n    this._displays.push(this._display);\r\n  }\r\n\r\n  unsetData(key) {\r\n    delete this._data[key];\r\n  }\r\n\r\n  setData(key, value = true) {\r\n    this._data[key] = value;\r\n  }\r\n\r\n  getData(key) {\r\n    return this._data[key];\r\n  }\r\n\r\n  hasData(key) {\r\n    return typeof this._data[key] !== 'undefined';\r\n  }\r\n\r\n  show() {\r\n    this.renderer.draw();\r\n    var _this = this;\r\n\r\n    if (this.getData('tween') && TWEEN) {\r\n      TWEEN.update();\r\n    }\r\n\r\n    requestAnimationFrame(function () {\r\n      _this.show();\r\n    });\r\n  }\r\n\r\n  _attachInteractive() {\r\n    var renderer = this.renderer;\r\n    var interactive = new LiThree.Interactive(renderer);\r\n\r\n    this.interactive = interactive;\r\n  }\r\n\r\n}\r\nexport default\r\nclass OrbitHelper {\r\n\r\n  constructor(canvas) {\r\n    this.canvas = canvas;\r\n\r\n    this.quaternion = new LiThree.Math.Quaternion();\r\n    this.matrix = null;\r\n\r\n    this.origin = new LiThree.Math.Vector3();\r\n    this.speed = 1;\r\n\r\n    canvas.renderer.camera.position.z = -10;\r\n\r\n    this._getMatrix();\r\n  }\r\n\r\n  rotate(dx, dy) {\r\n    dx *= this.speed;\r\n    dy *= this.speed;\r\n\r\n    var\r\n      r = Math.sqrt(dx * dx + dy * dy),\r\n      dq = new LiThree.Math.Quaternion(1, 0, 0, 0),\r\n      cq = this.quaternion,\r\n      rs = Math.sin(r * Math.PI) / r;\r\n\r\n    if(r < 0.000001) {\r\n      return;\r\n    }\r\n\r\n    dq.x = Math.cos(r * Math.PI);\r\n    dq.y = 0;\r\n    dq.z = rs * dx;\r\n    dq.w = -rs * dy;\r\n\r\n    this.quaternion = new LiThree.Math.Quaternion(1, 0, 0, 0);\r\n    this.quaternion.multiply(dq);\r\n    this.quaternion.multiply(cq);\r\n\r\n    this._getMatrix();\r\n  }\r\n\r\n  distance(delta) {\r\n    var canvas = this.canvas,\r\n      camera = canvas.renderer.camera;\r\n\r\n    delta *= this.speed / 50;\r\n\r\n    if (canvas.getData('tween')) {\r\n      var z = camera.position.z + delta;\r\n      new TWEEN.Tween(camera.position)\r\n        .to({z: z}, 200)\r\n        .easing(TWEEN.Easing.Cubic.Out)\r\n        .start();\r\n    } else {\r\n      camera.position.z += delta / 2;\r\n    }\r\n  }\r\n\r\n  _getMatrix() {\r\n    this.matrix = LiThree.Math.Matrix4.fromRotationTranslationScaleOrigin(this.quaternion, this.origin, new LiThree.Math.Vector3(1, 1, 1), this.origin);\r\n    return this.matrix;\r\n  }\r\n\r\n}\r\nexport default\r\nclass BaseDisplay {\r\n\r\n  constructor(canvas) {\r\n    this.canvas = canvas;\r\n    this._atoms = [];\r\n  }\r\n\r\n  drawAll() {\r\n\r\n  }\r\n\r\n}\r\nimport BaseDisplay from '_base.js';\r\n\r\nvar BAS_KEY = 'ball-and-stick';\r\nvar BAS_SHADERS = {};\r\n\r\nexport default\r\nclass BallAndStick extends BaseDisplay {\r\n\r\n  constructor(canvas) {\r\n    this.lights = [];\r\n    super(canvas);\r\n\r\n    BAS_SHADERS.sphere = canvas.renderer.createProgrammer();\r\n    BAS_SHADERS.sphere.vertexProgram.clear();\r\n    BAS_SHADERS.sphere.fragmentProgram.clear();\r\n    this._orbitShader(BAS_SHADERS.sphere);\r\n\r\n    BAS_SHADERS.cylinder = canvas.renderer.createProgrammer();\r\n    BAS_SHADERS.cylinder.vertexProgram.clear();\r\n    BAS_SHADERS.cylinder.fragmentProgram.clear();\r\n    this._orbitShader(BAS_SHADERS.cylinder);\r\n    this._programCylinderShader(BAS_SHADERS.cylinder);\r\n  }\r\n\r\n  drawLight() {\r\n\r\n    var light = new LiThree.Light.Point();\r\n\r\n    light.specularColor.rgb(0.2, 0.2, 0.2);\r\n    light.position.x = -30;\r\n    light.position.z = -60;\r\n    light.position.y = -30;\r\n\r\n    this.lights = [light];\r\n\r\n    light.program(BAS_SHADERS.sphere.vertexProgram, BAS_SHADERS.sphere.shaderProgram);\r\n    light.program(BAS_SHADERS.cylinder.vertexProgram, BAS_SHADERS.cylinder.shaderProgram);\r\n  }\r\n\r\n  drawAtom(atom, callback) {\r\n    var canvas = this.canvas,\r\n      renderer = canvas.renderer,\r\n      world = renderer.world;\r\n\r\n    var position = atom.position;\r\n\r\n    var radius = Math.exp(-Math.pow(atom.element.atomicRadius - 91, 2) / 500) * atom.element.atomicRadius / 200;\r\n\r\n    var sphere = LiThree.ObjectFactory.Sphere(radius, 20, 20);\r\n\r\n    //sphere.drawingMode = LiThree.Common.drawingMode.LINES;\r\n    sphere.position.copy(position);\r\n\r\n    sphere.material.shininess = 10;\r\n    sphere.material.color.hex = atom.element.color;\r\n\r\n    world.add(sphere);\r\n\r\n    sphere.shader = BAS_SHADERS.sphere;\r\n    renderer.initShape(sphere);\r\n\r\n\r\n    var elements = {\r\n      sphere: sphere,\r\n      position: sphere.position,\r\n      color: sphere.material.color,\r\n      radius: radius\r\n    };\r\n\r\n    atom.setData(BAS_KEY, elements);\r\n\r\n    if (canvas.getData('tween')) {\r\n      sphere.scale.set(0, 0, 0);\r\n\r\n      new TWEEN.Tween(sphere.scale)\r\n        .to({x: 1, y: 1, z: 1}, 500)\r\n        .easing(TWEEN.Easing.Elastic.Out)\r\n        .start();\r\n    }\r\n\r\n    if (callback) {\r\n      callback(null, atom);\r\n    }\r\n  }\r\n\r\n  removeAtom(atom) {\r\n    var canvas = this.canvas,\r\n      renderer = canvas.renderer,\r\n      world = renderer.world,\r\n      data = atom.getData(BAS_KEY);\r\n\r\n    if (data) {\r\n      world.remove(data.sphere);\r\n    }\r\n  }\r\n\r\n  drawBond(bond) {\r\n    var elements;\r\n\r\n    if (bond.hasData(BAS_KEY)) {\r\n      elements = bond.getData(BAS_KEY);\r\n      return;\r\n    } else {\r\n      elements = {\r\n        cylinders: []\r\n      };\r\n      bond.setData(BAS_KEY, elements);\r\n    }\r\n\r\n    var renderer = this.canvas.renderer,\r\n      world = renderer.world,\r\n      begin = bond.begin,\r\n      end = bond.end,\r\n      beginD = begin.getData(BAS_KEY),\r\n      endD = end.getData(BAS_KEY);\r\n\r\n    if (!beginD || !endD) {\r\n      return;\r\n    }\r\n\r\n    var beginP = beginD.position,\r\n      endP = endD.position,\r\n      beginC = beginD.color,\r\n      endC = endD.color,\r\n      distance = beginP.distance(endP),\r\n      middle = beginP.clone().add(endP).divide(2),\r\n      deltaX = endP.x - beginP.x,\r\n      deltaY = endP.y - beginP.y,\r\n      deltaZ = endP.z - beginP.z,\r\n      d = 0.06;\r\n\r\n\r\n    var rotation = new LiThree.Math.Quaternion();\r\n    rotation.rotateZ(Math.atan2(deltaY, deltaX));\r\n    rotation.rotateY(-Math.asin(deltaZ / distance));\r\n\r\n    var c = (bond.order - 1) * d;\r\n\r\n    for (var i = 0; i < bond.order; i++) {\r\n      let cylinder = LiThree.ObjectFactory.Cylinder(distance, d, d);\r\n      cylinder.bond = bond;\r\n      cylinder.material.color = beginC;\r\n      cylinder.shader = BAS_SHADERS.cylinder;\r\n      //this._programCylinderShader(cylinder, endC);\r\n      elements.cylinders.push(cylinder);\r\n\r\n      world.add(cylinder);\r\n    }\r\n\r\n    for (var j in elements.cylinders) {\r\n      let cylinder = elements.cylinders[j];\r\n\r\n      cylinder.rotation = rotation;\r\n      cylinder.position.copy(middle);\r\n      cylinder.position.y += j * d * 2.1 - c;\r\n    }\r\n\r\n  }\r\n\r\n  removeBond(bond) {\r\n    var canvas = this.canvas,\r\n      renderer = canvas.renderer,\r\n      world = renderer.world,\r\n      data = bond.getData(BAS_KEY);\r\n\r\n    if (data) {\r\n      for (var i in data.cylinders) {\r\n        world.remove(data.cylinders[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  _programCylinderShader(shader, endC) {\r\n\r\n    var fragmentProgram = shader.fragmentProgram,\r\n      vertexProgram = shader.vertexProgram;\r\n\r\n    fragmentProgram.clear();\r\n    fragmentProgram.code(`vec3 effectiveColor = halfColor > 0.5 ? vColor : %c2; gl_FragColor = vec4(%lw + effectiveColor, 1.0);`, {\r\n      c2: fragmentProgram.uniform('vec3', function (obj) {\r\n        this.value(obj.bond.end.getData(BAS_KEY).color.toArray());\r\n      }),\r\n      hc: fragmentProgram.varying('float', 'halfColor'),\r\n      lw: 'lightWeight'\r\n    });\r\n\r\n    vertexProgram.code(`%hc = %vp.x < 0.5 ? 1.0 : 0.0;`, {\r\n      lw: 'lightWeight',\r\n      vp: 'vPosition',\r\n      hc: vertexProgram.varying('float', 'halfColor')\r\n    });\r\n  }\r\n\r\n  _orbitShader(shader) {\r\n    var\r\n      fragmentProgram = shader.fragmentProgram,\r\n      vertexProgram = shader.vertexProgram,\r\n      orbitHelper = this.canvas.orbitHelper;\r\n\r\n    vertexProgram.code('mat4 mvMatrix = %vm * %om * %mm;\\ngl_Position = %p * mvMatrix  * vec4(%vp, 1.0);', {\r\n      p: 'pMatrix',\r\n      vm: 'vMatrix',\r\n      mm: 'mMatrix',\r\n      vp: 'vPosition',\r\n      om: vertexProgram.uniform('mat4', function () {\r\n        this.value(orbitHelper.matrix);\r\n      })\r\n    });\r\n\r\n    shader.initLighting();\r\n  }\r\n\r\n  create() {\r\n    this.drawLight();\r\n    this.up();\r\n  }\r\n\r\n  up() {\r\n    var world = renderer.world;\r\n\r\n    for (var i in this.lights) {\r\n      world.add(this.lights[i]);\r\n    }\r\n  }\r\n\r\n  down() {\r\n    var world = renderer.world;\r\n\r\n    for (var i in this.lights) {\r\n      world.remove(this.lights[i]);\r\n    }\r\n\r\n  }\r\n\r\n}\r\nexport default\r\nclass EditorMode {\r\n\r\n  constructor(canvas) {\r\n    this.canvas = canvas;\r\n  }\r\n\r\n  up() {\r\n    var interactive = this.canvas.interactive;\r\n\r\n    interactive.on('drag', this._dragEvent);\r\n    interactive.on('click', this._clickEvent);\r\n    interactive.on('tap', this._clickEvent);\r\n    interactive.on('wheel', this._wheelEvent);\r\n  }\r\n\r\n  down() {\r\n    var interactive = this.canvas.interactive;\r\n\r\n    interactive.off('drag', this._dragEvent);\r\n    interactive.off('click', this._clickEvent);\r\n    interactive.off('wheel', this._wheelEvent);\r\n  }\r\n\r\n  create() {\r\n    var canvas = this.canvas,\r\n      camera = canvas.renderer.camera,\r\n      orbitHelper = canvas.orbitHelper;\r\n\r\n    this._wheelEvent = function (delta) {\r\n      orbitHelper.distance(delta);\r\n    };\r\n\r\n\r\n    this._clickEvent = function (point, unproject, e) {\r\n      var pos = unproject(0);\r\n      pos.unproject(orbitHelper.matrix.clone());\r\n      var atom = new Chem.Atom();\r\n      atom.position = pos;\r\n\r\n      atom.atomicNumber = 6;\r\n\r\n      var ray = LiThree.Math.Ray.fromPoints(camera.position, unproject(0));\r\n      var caster = new LiThree.RayCaster(ray);\r\n      var resu = caster.intersectTriangle(\r\n        new LiThree.Math.Vector3(-1, -1, 0),\r\n        new LiThree.Math.Vector3(-1, 1, 0),\r\n        new LiThree.Math.Vector3(1, 0, 0));\r\n\r\n      canvas.addAtom(atom);\r\n    };\r\n\r\n    this._dragEvent = function (point, delta, unproject, e) {\r\n      var position = unproject(0.5);\r\n\r\n      if (e.button === 0) {\r\n\r\n      } else if (e.button === 2) {\r\n\r\n      }\r\n    };\r\n\r\n    this.up();\r\n  }\r\n\r\n}\r\nexport default\r\nclass OrbitMode {\r\n\r\n  constructor(canvas) {\r\n    this.canvas = canvas;\r\n  }\r\n\r\n  up() {\r\n    var interactive = this.canvas.interactive;\r\n\r\n    interactive.on('drag', this._dragEvent);\r\n    interactive.on('touchmove', this._dragEvent);\r\n    interactive.on('wheel', this._wheelEvent);\r\n  }\r\n\r\n  down() {\r\n    var interactive = this.canvas.interactive;\r\n\r\n    interactive.off('drag', this._dragEvent);\r\n    interactive.off('touchmove', this._dragEvent);\r\n    interactive.off('wheel', this._wheelEvent);\r\n  }\r\n\r\n  create() {\r\n    var canvas = this.canvas,\r\n      camera = canvas.renderer.camera,\r\n      orbitHelper = canvas.orbitHelper;\r\n\r\n    this._wheelEvent = function (delta) {\r\n      orbitHelper.distance(delta);\r\n    };\r\n\r\n    this._dragEvent = function (point, delta, unproject, e) {\r\n      if (e instanceof TouchEvent || e.button === 0) {\r\n        var dx = -delta.x / 400,\r\n          dy = -delta.y / 400;\r\n\r\n        canvas.orbitHelper.rotate(dx, dy);\r\n      } else if (e.button === 2) {\r\n        e.preventDefault();\r\n        camera.position.x += -delta.x / 100;\r\n        camera.position.y += delta.y / 100;\r\n      }\r\n    };\r\n\r\n    this.up();\r\n  }\r\n\r\n\r\n}\n//# sourceMappingURL=concat.js.map","root.MolCanvas = {\r\n  Canvas: Canvas,\r\n  Display: {\r\n    BallAndStick: BallAndStick\r\n  },\r\n  Mode: {\r\n    Orbit: OrbitMode,\r\n    Editor: EditorMode\r\n  }\r\n};\r\n})\r\n(this);"]}